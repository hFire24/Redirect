<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>You got redirected!</title>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:ital,wght@1,500;1,800&family=Barlow:ital,wght@1,900&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="icons/icon.ico">
    <link id='apple' rel="apple-touch-icon" href="icons/apple-touch-icon.png">
  </head>
  <body class="theme8">
    <h1 id="message" class="invisible"></h1>
    <h2 id="question">Why are you here?</h2>
    <div id='link'><input id="newBreak" type="text"><button id="submit" onClick="submit()">Submit</button>
      <div id="dropdown">
        <span class="custom-select" style="width:200px;">
          <select id='custom-reason'>
            <option id="-1" value="-1"></option>
          </select>
        </span><button onclick="submit()">Submit</button>
      </div>
    </div>
    <img style='max-width:90%; height:auto; opacity:0;' src='media/Nissan Expanding Brain.png' style='opacity:0;' width="857"></img>
    <audio id='press'>
      <source src="media/Button Push.mp3" type="audio/mpeg">
    </audio>
    <script>
    //Changes the apple icon
    var icon = document.getElementById("apple");
    var iconNumber = Math.floor(Math.random() * 7) + 1;
    if(iconNumber > 1)
      icon.href = "icons/apple-touch-icon " + iconNumber + ".png";

    function submit() {
      console.log($("custom-reason").value);
      console.log($($("custom-reason").value).innerHTML);
      console.log($("newBreak").value);
      var inputText = '';
      if($("custom-reason").value !== -1 && $("newBreak").value === '')
        inputText = $($("custom-reason").value).innerHTML.toLowerCase();
      else
        inputText = $("newBreak").value.toLowerCase();
      if (inputText.indexOf("twitter") >= 0) {
        $("question").innerHTML = "Twitter is a toxic wasteland that you should not go to.";
        $("link").innerHTML = "<a href='cyoa/1.html'>Click here to continue.</a>";
      }
      else if (inputText.indexOf("deviantart") >= 0) {
        $("question").innerHTML = giveAReason("deviantart");
        $("link").innerHTML = "<a href='cyoa/1.html'>Click here to continue.</a>";
      }
      else if (inputText.indexOf("youtube") >= 0) {
        $("question").innerHTML = "YouTube is your most frequented timesink. Avoid going there.";
        $("link").innerHTML = "<a href='cyoa/1.html'>Click here to continue.</a>";
      }
      else if (inputText.indexOf("reddit") >= 0) {
        $("question").innerHTML = "Reddit is bad.";
        $("link").innerHTML = "<a href='cyoa/1.html'>Click here to continue.</a>";
      }
      else
        finalTest(inputText,"hotanddry");
      if ($("question").innerText === "Click here.")
        document.body.removeChild($("link"));
    }

    var reasons = ["Because I'm lazy",
    "Because I'm bored", "Because I'm tired", "Because I'm really bored", "I have nothing to do",
    "For no reason",
    "Because I feel like it",
    "Because I feel tired",
    "Because I want to look at cute anime girls",
    "Because I feel stressed",
    "Because I feel worried",
    "Because I feel busy",
    "Because I feel disappointed",
    "Because I feel unconfident",
    "Because I want to visit Twitter",
    "Because I feel overwhelmed",
    "Because I feel impatient",
    "Because I feel angry",
    "Because I feel like procrastinating",
    "Because I feel unmotivated",
    "I feel like visiting DeviantArt",
    "Because I can't focus",
    "Because I want to relax",
    "I'm struggling in life",
    "I feel like playing a game",
    "Because I feel hungry",
    "I don't know",
    "I want to do nothing",
    "To browse Instagram",
    "I am waiting for something",
    "I want to get motivated",
    "I want to accomplish goals",
    "I want to complete tasks",
    "I want to listen to music",
    "I want to browse YouTube",
    "I already looked at bad stuff",
    "I just relapsed",
    "I got something I need to do",
    "I'm ready to do something else"];
    for(var i in reasons) {
      var option = document.createElement('option');
      option.id = i;
      option.value = i;
      option.innerHTML = reasons[i];
      document.getElementById("custom-reason").appendChild(option);
    }

    var noDeviantArtReasons = ["If you're quitting anime, you might as well abandon DeviantArt.",
    "You allowed DeviantArt to corrupt yourself, so don't further corrupt yourself.",
    "DeviantArt was a source of your many relapses, and relapses are unacceptable.",
    "DeviantArt's reputation is not very good due to some of its art.",
    "Like YouTube, DeviantArt can be a major timesink.",
    "Time is money. Don't let DeviantArt waste more of your time.",
    "<span onclick='pushTheButtonHD()'>Click here.</span>"];
    function giveAReason(website) {
      if (website === "deviantart")
      {
        var index = Math.floor(Math.random() * noDeviantArtReasons.length)
        return noDeviantArtReasons[index];
      }
      else
        return "I'm gonna assume that you should be more productive instead.";
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function pushTheButtonHD()
    {
      $("press").play();
      $("question").style.color = 'white';
      await sleep(1750);
      location.href = "https://emergency.nofap.com/redirect?religious=true&cat=em";
    }
    </script>
    <script src="interactivefiction.js"></script>
    <script src="pulltorefresh.js/dist/pulltorefresh.js"></script>
    <script>
    PullToRefresh.init({
      mainElement: 'body',
      distMax: window.innerHeight / 2,
      onRefresh: function() {
        $("question").innerHTML = "I get it. You miss the pull to refresh feature on social media websites. But you could spend your spare time more wisely.";
        $("link").innerHTML = "<a href='cyoa/64.html'>Click here to continue.</a>";
      }
    });
    </script>
  </body>
</html>

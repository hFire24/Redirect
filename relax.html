<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Relax.</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="icons/icon-meditate.ico">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon RL.png">
  </head>
  <body class="relax">
    <div id='message' class='space'>It's time to relax.</div>
    Go to <a href="https://app.mysoundwise.com/mysoundcasts" target="_blank">Soundwise</a>, followed by <strong id='pack' style='color:darkblue;'></strong> to listen to audio files for <span id='purpose'></span><br>
    <div id='message2' class='space' style='margin-top:1em;'>
      For Example: <span id='random'></span> <span id='action'></span> <button onclick=increment('relaxTrack')>Next</button>
    </div>
    <div id='hideable' class='relax-list' style='margin-top:1em;'>
    </div>
    <div class="two-list"><a id='more' href='relax2.html' class='hfire-link'><strong style='color:darkred;'>More (Grid View)</strong></a><a href='relax-table.html' class='hfire-link'><strong style='color:darkred;'>More (Table View)</strong></a></div>
    <script src='script.js'></script>
    <script>
      if(!sessionStorage.getItem('angerTrack')) {
        sessionStorage.setItem('angerTrack', 2);
      }
      if(!sessionStorage.getItem('worryTrack')) {
        sessionStorage.setItem('worryTrack', 1);
      }
      if(!sessionStorage.getItem('stressTrack')) {
        sessionStorage.setItem('stressTrack', 1);
      }
      if(!sessionStorage.getItem('confidenceTrack')) {
        sessionStorage.setItem('confidenceTrack', 3);
      }
      if(!sessionStorage.getItem('relaxTrack')) {
        sessionStorage.setItem('relaxTrack', 25);
      }

      pack.innerHTML = "Quick Solutions";
      purpose.innerHTML = "a short break.";

      randomMeditation(sessionStorage.getItem('relaxTrack'));

      function randomMeditation(index)
      {
        var relaxText = getAndrewJohnsonMeditation(index);
        document.getElementById("random").innerHTML = relaxText;

        if(relaxText.startsWith("Body Scan") || relaxText.startsWith("Breathing")) //6
          action.innerHTML = 'helps you concentrate.';
        else if(relaxText === "Favourite Place Relaxation" || relaxText === "Memory Break" || relaxText === "Smiling Relaxation") //3
          action.innerHTML = 'makes you happier.';
        else if(relaxText === "Grounding Relaxation" || relaxText === "Heaviness Relaxation" || relaxText === "Roots Break") //3
          action.innerHTML = 'relaxes you.';
        else if(relaxText === "Energy Boost Meditation") //1
          action.innerHTML = 're-energizes you.';
        else if(relaxText === "Quick Confidence") //1
          action.innerHTML = 'boosts your confidence.';
        else //Ears, Eyes, Head, Massage, Release, Shoulder, Stomach, Stretch
          action.innerHTML = 'refreshes you.';
      }

      const moodSearch = window.location.search;
      if (moodSearch !== "") {
        const parameter = new URLSearchParams(moodSearch);
        let mood = parameter.get('mood');
        more.href = "relax2.html?mood=" + mood;
        switch(mood) {
          case "angry":
            pack.innerHTML = "SOS - Let Go of Anger";
            purpose.innerHTML = "calming the mind.";
            message2.innerHTML = "Good job on making the first step to control your anger. You are on track " + sessionStorage.getItem('angerTrack') + ". <button onclick=increment('angerTrack')>Next</button>";
            break;
          case "worried":
            pack.innerHTML = "SOS - Let Go of Anxiety";
            purpose.innerHTML = "calming the mind.";
            message2.innerHTML = "You do not want to keep this feeling with you. You are on track " + sessionStorage.getItem('worryTrack') + ". <button onclick=increment('worryTrack')>Next</button>";
            break;
          case "stressed":
            pack.innerHTML = "SOS - Let Go of Stress";
            purpose.innerHTML = "destressing.";
            message2.innerHTML = "You are on track " + sessionStorage.getItem('stressTrack') + ". Listening to it is a strategic move in life. <button onclick=increment('stressTrack')>Next</button>";
            break;
          case "unconfident":
            pack.innerHTML = "SOS - Confidence Boost";
            purpose.innerHTML = "making you confident.";
            message2.innerHTML = "You have the potential to become successful. You are on track " + sessionStorage.getItem('confidentTrack') + ". <button onclick=increment('confidentTrack')>Next</button>";
            break;
          case "lazy":
            pack.innerHTML = "Quick Solutions";
            purpose.innerHTML = "a short break.";
            message2.innerHTML = "For Example: <span id='random'>Stretch Relaxation</span> <span id='action'>gets you moving.</span>";
            break;
          case "tired":
            while(!found(["refresh","re-energize"],action.innerHTML))
              randomMeditation(-1);
            break;
        }
      }

      function increment(track) {
        var incremented = sessionStorage.getItem(track);
        incremented++;
        if(incremented === 4 && (track === 'worryTrack' || track === 'angerTrack') || incremented === 7 && (track === 'stressTrack' || track === 'confidenceTrack') || incremented === 24 && track === 'relaxTrack')
          incremented = 1;
        sessionStorage.setItem(track,incremented);
        location.reload();
      }
    </script>
  </body>
</html>
